"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return i};var c,i={},t=Object.prototype,s=t.hasOwnProperty,l=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(c){a=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o,a,i,u,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),n=new b(n||[]);return l(e,"_invoke",{value:(o=t,a=r,i=n,u=f,function(t,e){if(u===h)throw new Error("Generator is already running");if(u===y){if("throw"===t)throw e;return{value:c,done:!0}}for(i.method=t,i.arg=e;;){var r=i.delegate;if(r){r=function t(e,r){var n=r.method,o=e.iterator[n];if(o===c)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=c,t(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;n=d(o,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,v;o=n.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=c),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}(r,i);if(r){if(r===v)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(u===f)throw u=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);u=h;r=d(o,a,i);if("normal"===r.type){if(u=i.done?y:p,r.arg===v)continue;return{value:r.arg,done:i.done}}"throw"===r.type&&(u=y,i.method="throw",i.arg=r.arg)}})}),e}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}i.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function w(){}function g(){}var e={},E=(a(e,n,function(){return this}),Object.getPrototypeOf),E=E&&E(E(k([]))),P=(E&&E!==t&&s.call(E,n)&&(e=E),g.prototype=m.prototype=Object.create(e));function _(t){["next","throw","return"].forEach(function(e){a(t,e,function(t){return this._invoke(e,t)})})}function S(i,u){var e;l(this,"_invoke",{value:function(r,n){function t(){return new u(function(t,e){!function e(t,r,n,o){var a,t=d(i[t],i,r);if("throw"!==t.type)return(r=(a=t.arg).value)&&"object"==_typeof(r)&&s.call(r,"__await")?u.resolve(r.__await).then(function(t){e("next",t,n,o)},function(t){e("throw",t,n,o)}):u.resolve(r).then(function(t){a.value=t,n(a)},function(t){return e("throw",t,n,o)});o(t.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}})}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function b(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(e){if(e||""===e){var r,t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return r=-1,(t=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=c,t.done=!0,t}).next=t}throw new TypeError(_typeof(e)+" is not iterable")}return l(P,"constructor",{value:w.prototype=g,configurable:!0}),l(g,"constructor",{value:w,configurable:!0}),w.displayName=a(g,o,"GeneratorFunction"),i.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,a(t,o,"GeneratorFunction")),t.prototype=Object.create(P),t},i.awrap=function(t){return{__await:t}},_(S.prototype),a(S.prototype,r,function(){return this}),i.AsyncIterator=S,i.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var a=new S(u(t,e,r,n),o);return i.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(P),a(P,o,"Generator"),a(P,n,function(){return this}),a(P,"toString",function(){return"[object Generator]"}),i.keys=function(t){var e,r=Object(t),n=[];for(e in r)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},i.values=k,b.prototype={constructor:b,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return a.type="throw",a.arg=r,n.next=t,e&&(n.method="next",n.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=s.call(o,"catchLoc"),u=s.call(o,"finallyLoc");if(i&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var a=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,n,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(r=o.completion).type&&(n=r.arg,L(o)),n}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=c),v}},i}({1478:function(){var c=this&&this.__awaiter||function(t,i,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{a(c.next(t))}catch(t){e(t)}}function o(t){try{a(c.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}a((c=c.apply(t,i||[])).next())})};!function(){var t=this,r=function(t){if(null==t)return null;for(var e=Object.keys(t),r=null,n=0;n<e.length;n++)if(e[n].startsWith("__reactInternalInstance")){r=e[n];break}return r?t[r]:null},m=function(){var t=window.netflix.appContext.state.playerApp.getAPI().videoPlayer,e=t.getAllPlayerSessionIds().find(function(t){return t.includes("watch")});return t.getVideoPlayerBySessionId(e)},w=function(){try{var t,e=a().state.playbackState.currentAdBreak;return null!=e?(t=e.progress.adBreakOffset.ms,{watchingAds:!0,adDurationLeft:t,nextAdBreak:n()}):{watchingAds:!1,adDurationLeft:0,nextAdBreak:n()}}catch(t){return console.log(t),{watchingAds:!1,adDurationLeft:0,nextAdBreak:n()}}},n=function(){try{var r,n,t=a().getAdBreaks(),o=m().getCurrentTime();if(t&&0!=t.length)return n=1/(r=0),t.forEach(function(t){var e;t.locationMs&&0<(e=t.locationMs-o)&&e<n&&(n=e,r=t.locationMs)}),0!=r?r:void 0}catch(t){console.log(t)}},a=function(){try{return r(document.querySelector(".watch-video")).return.return.return.return.return.stateNode}catch(t){}},g=function(){try{return o().state.activeVideoMetadata._metadata._metadata.video}catch(t){}};function E(t){try{if(t.source==window)if(t.data.type&&"SEEK"===t.data.type)t.data.time>=m().duration?(m().pause(),m().seek(m().duration-100)):m().seek(t.data.time);else if(t.data.type&&"PAUSE"===t.data.type)m().pause();else if(t.data.type&&"FIX_POST_PLAY"===t.data.type)x();else if(t.data.type&&"PLAY"===t.data.type)S(),m().play();else if(t.data.type&&"IsPaused"===t.data.type){var e=m().isPaused(),r=new CustomEvent("FromNode",{detail:{type:"IsPaused",paused:e,updatedAt:Date.now()}});window.dispatchEvent(r)}else if(t.data.type&&"GetCurrentTime"===t.data.type){var n=m().getCurrentTime(),o=new CustomEvent("FromNode",{detail:{type:"CurrentTime",time:n,updatedAt:Date.now()}});window.dispatchEvent(o)}else if(t.data.type&&"teardown"==t.data.type)L(),window.removeEventListener("message",E,!1),window.injectScriptLoaded=!1;else if(t.data.type&&"NEXT_EPISODE"==t.data.type)try{k(t.data.videoId)}catch(t){console.log("Caught Error in React Next Episode "+t)}else if(t.data.type&&"GetState"==t.data.type){var a,i,u,c,s,l=m();S(),l&&(a=l.isPaused(),i=l.getCurrentTime(),u=null!==l.getBusy(),c=w(),s=new CustomEvent("FromNode",{detail:{type:"UpdateState",time:i,paused:a,adState:c,loading:u,updatedAt:Date.now()}}),window.dispatchEvent(s))}else if(t.data.type&&"ShowControls"===t.data.type)b();else if(t.data.type&&"CheckSkipSupplemental"===t.data.type)P().then(function(){var t=new CustomEvent("FromNode",{detail:{type:"CheckSkipSupplemental",updatedAt:Date.now()}});window.dispatchEvent(t)});else if(t.data.type&&"GetPageTitle"===t.data.type)try{var d=g().title,f=new CustomEvent("FromNode",{detail:{type:"GetTitle",pageTitle:d,updatedAt:Date.now()}});window.dispatchEvent(f)}catch(t){}else if(t.data.type&&"GetVideoType"===t.data.type){var p="Episode",h=(S()&&(p="Movie"),new CustomEvent("FromNode",{detail:{type:"GetType",VideoType:p,updatedAt:Date.now()}}));window.dispatchEvent(h)}else if(t.data.type&&"GetEpisodeData"===t.data.type)try{var y=_(),v=new CustomEvent("FromNode",{detail:{type:"GetEpData",episodeData:y,updatedAt:Date.now()}});window.dispatchEvent(v)}catch(t){}}catch(t){console.log(t)}}var i=function(e){return c(t,void 0,void 0,_regeneratorRuntime().mark(function t(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){setTimeout(function(){t()},e)}));case 1:case"end":return t.stop()}},t)}))},e=function(r,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:250;return function(){var e=(new Date).getTime();return function t(){return r()?Promise.resolve():null!==n&&(new Date).getTime()-e>n?Promise.reject(new Error("delayUntil timed out"+r)):i(o).then(t)}()}},P=function(){return c(t,void 0,void 0,_regeneratorRuntime().mark(function t(){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(function(){try{return null!=o().state.activeVideoMetadata._video}catch(t){return!1}},5e3)();case 3:if("supplemental"==o().state.activeVideoMetadata._video.type)return console.log("SKIPPING SUPPLEMENTAL"),o().handleFinishPrePlay(),t.next=8,e(function(){try{return"supplemental"!=o().state.activeVideoMetadata._video.type}catch(t){return!1}},1/0)();t.next=9;break;case 8:console.log("DOne Skip");case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}))},_=function(){var t=o().state.activeVideoMetadata._video.title,e=o().state.activeVideoMetadata._video.seq;return{title:t,seasonNum:o().state.activeVideoMetadata._season._season.seq,episodeNum:e}},o=function(){var t=document.querySelector(".watch-video");if(t){t=r(t);if(t)return t.return.return.return.return.return.stateNode}return null},S=function(){try{var t=o();return!!t&&"movie"===t.state.playableData.summary.type}catch(t){return!1}},x=function(){var t;S()&&(t=o())&&(window.oldHasPostPlay=t.hasPostPlay,t.hasPostPlay=function(){return!1},console.log("DISABLED POST PLAY FOR MOVIE"))},L=function(){var t=o();t&&window.oldHasPostPlay&&(t.hasPostPlay=window.oldHasPostPlay)},u=function(){try{for(var t=[document.querySelector('div[data-uia="player"]'),document.querySelector("div[data-videoid]"),document.querySelector("div .ltr-fntwn3"),document.querySelector(".active"),document.querySelector(".inactive"),document.querySelector(".passive"),document.querySelector(".watch-video--player-view").children[0]],e=0;e<t.length;e++)try{if(t[e])return t[e]}catch(t){}return null}catch(t){return null}},b=function(){return c(t,void 0,void 0,_regeneratorRuntime().mark(function t(){var e;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=u())if(e=r(e))return e.memoizedProps.onPointerMoveCapture({stopPropagation:function(){},preventDefault:function(){}}),t.next=7,i(2);t.next=7;break;case 7:case"end":return t.stop()}},t)}))},k=function(r){return c(t,void 0,void 0,_regeneratorRuntime().mark(function t(){var e;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{e={stopPropagation:function(){}},a().handleSelectorEpisodePlay(e,r)}catch(t){console.log(t)}case 1:case"end":return t.stop()}},t)}))};window.injectScriptLoaded||(window.injectScriptLoaded=!0,console.log("Loaded TP Netflix Injected"),P(),window.addEventListener("message",E,!1))}()}})[1478]();